<!-- FUNCTIONS SECTION -->
<section id="functions" class="py-20 px-6">
  <div class="container mx-auto max-w-6xl">
    <div class="text-center mb-16">
      <span class="badge badge-blue mb-4">Python Fundamentals #2</span>
      <h2 class="text-4xl md:text-5xl font-bold mb-4 gradient-text">
        <i class="fas fa-code mr-3"></i>Functions & Methods
      </h2>
      <p class="text-xl text-gray-600 dark:text-gray-400">
        Function definition, type hints, docstrings, callbacks - Production-ready patterns
      </p>
    </div>

    <!-- THEORY SECTION -->
    <div
      class="mb-16 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 p-8 rounded-2xl">
      <h3 class="text-3xl font-bold mb-6 text-blue-600 dark:text-blue-400">
        <i class="fas fa-graduation-cap mr-3"></i>Apa itu Functions?
      </h3>

      <div class="space-y-6 text-gray-800 dark:text-gray-200">
        <p class="text-lg">
          <strong>Functions (fungsi)</strong> adalah blok kode yang dapat digunakan kembali yang melakukan tugas
          spesifik.
          Anggap mereka sebagai mini-program dalam program. Kamu tulis kode sekali dalam function,
          lalu panggil function itu berkali-kali kapanpun dibutuhkan.
        </p>

        <div class="bg-blue-50 dark:bg-blue-900/30 p-6 rounded-xl">
          <h4 class="text-xl font-bold mb-3">üéØ Analogi Gampang: Resep Masakan!</h4>
          <p class="text-sm mb-3">
            Function itu seperti <strong>resep masak</strong>:
          </p>
          <ul class="text-sm space-y-2">
            <li>‚Ä¢ <strong>Nama resep</strong> = nama function (contoh: <code>buatMieGoreng()</code>)</li>
            <li>‚Ä¢ <strong>Bahan-bahan</strong> = parameter/input (mie, telur, bumbu)</li>
            <li>‚Ä¢ <strong>Langkah-langkah</strong> = isi function (rebus, goreng, aduk)</li>
            <li>‚Ä¢ <strong>Makanan jadi</strong> = return value/hasil (mie goreng siap makan!)</li>
          </ul>
          <p class="text-xs mt-3 italic">
            Sekali kamu punya resep, kamu bisa masak berulang-ulang tanpa harus ingat-ingat langkahnya!
          </p>
        </div>

        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl">
          <h4 class="text-xl font-bold mb-4 text-purple-600 dark:text-purple-400">‚úÖ Kenapa Pakai Function?</h4>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <h5 class="font-bold mb-2">1. Tidak Perlu Nulis Ulang (DRY)</h5>
              <p class="text-sm">Tulis sekali, pakai berkali-kali. Seperti punya resep di buku - tinggal buka aja!</p>
            </div>
            <div>
              <h5 class="font-bold mb-2">2. Lebih Rapi</h5>
              <p class="text-sm">Program besar jadi kecil-kecil. Seperti rumah punya kamar-kamar, bukan cuma 1 ruang
                gede!</p>
            </div>
            <div>
              <h5 class="font-bold mb-2">3. Gampang Dibaca</h5>
              <p class="text-sm">Nama function jelasin kerjanya. <code>hitungLuas()</code> lebih jelas daripada formula
                math panjang!</p>
            </div>
            <div>
              <h5 class="font-bold mb-2">4. Gampang Diperbaiki</h5>
              <p class="text-sm">Ada bug? Tinggal benerin 1 function. Semua yang pakai otomatis ke-fix!</p>
            </div>
          </div>
        </div>

        <div
          class="bg-gradient-to-r from-green-50 to-teal-50 dark:from-green-900/20 dark:to-teal-900/20 p-6 rounded-xl">
          <div class="grid md:grid-cols-2 gap-6">
            <div class="bg-white dark:bg-gray-700 p-6 rounded-xl">
              <h4 class="font-bold text-lg mb-3 text-purple-600 dark:text-purple-400">üéØ Kapan Buat Function?</h4>
              <ul class="text-sm space-y-2">
                <li><strong>‚Ä¢ Kalau Copy-Paste:</strong> Kode yang sama 3+ kali? Bikin function!</li>
                <li><strong>‚Ä¢ Kalau Ribet:</strong> Kode panjang dan susah? Pecah jadi function kecil-kecil!</li>
                <li><strong>‚Ä¢ Kalau Ada Nama:</strong> Bisa dikasih nama yang jelas? Perfect untuk function!</li>
                <li><strong>‚Ä¢ Kalau Berguna Lagi:</strong> Mungkin dipakai lagi nanti? Bikin function!</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="bg-blue-50 dark:bg-blue-900/30 p-6 rounded-xl">
          <h4 class="text-xl font-bold mb-3">üìê Function Anatomy</h4>
          <div class="code-block">
            <pre class="rounded-lg"><code class="language-python">def function_name(parameter: type) -> return_type:
    """Docstring: what function does"""
    # Function body
    result = do_something(parameter)
    return result  # Optional

# Call the function
output = function_name(input_value)</code></pre>
          </div>
          <p class="text-sm mt-3">
            <strong>Komponen:</strong> <code>def</code> keyword, nama, parameter, type hints,
            docstring, isi function, dan nilai return (opsional).
          </p>
        </div>
      </div>
    </div>

    <!-- Function Basics -->
    <div class="mb-12">
      <h3 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
        <span class="text-4xl mr-3">‚öôÔ∏è</span> Anatomi Function (Bagian-Bagiannya)
      </h3>

      <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow-lg mb-6">
        <div class="code-block">
          <button class="copy-btn bg-blue-500 text-white px-3 py-1 rounded text-sm" onclick="copyCode(this)">
            <i class="fas fa-copy"></i>
          </button>
          <pre class="rounded-lg"><code class="language-python"># ball.py - Function dengan type hints dan docstring lengkap
def move(self, time_step: float) -> None:
    """
    Gerakkan bola berdasarkan kecepatan dan waktu.
    
    Parameters:
    -----------
    time_step : float
        Delta waktu (detik)
    """
    # Update posisi: s = s‚ÇÄ + v¬∑Œît
    self.position += self.velocity * time_step
    
    # Konversi ke piksel untuk visual
    pixels_x = self.position[0] / self.pixels_to_meters
    pixels_y = self.position[1] / self.pixels_to_meters
    
    # Simpan posisi untuk jejak
    self.trail_points.append((pixels_x, pixels_y))
    
    # Update visual
    self.draw_trail()
    self.update_visual_position()</code></pre>
        </div>
      </div>

      <div class="grid md:grid-cols-2 gap-6">
        <div class="callout tip">
          <h4 class="font-bold mb-2">‚úÖ Manfaat Petunjuk Tipe</h4>
          <ul class="text-sm space-y-1">
            <li>‚Ä¢ Program bisa kasih saran otomatis</li>
            <li>‚Ä¢ Tangkap error sebelum program jalan</li>
            <li>‚Ä¢ Kode jadi jelas dengan sendirinya</li>
            <li>‚Ä¢ Lebih gampang diperbaiki nanti</li>
          </ul>
        </div>
        <div class="callout info">
          <h4 class="font-bold mb-2">üìñ Type Hint Syntax</h4>
          <ul class="text-sm space-y-1">
            <li>‚Ä¢ <code>param: type</code> - Parameter type</li>
            <li>‚Ä¢ <code>-> type</code> - Return type</li>
            <li>‚Ä¢ <code>-> None</code> - No return value</li>
            <li>‚Ä¢ <code>Optional[type]</code> - Can be None</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Docstrings -->
    <div class="mb-12">
      <h3 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
        <span class="text-4xl mr-3">üìö</span> Docstrings - Documentation
      </h3>

      <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow-lg">
        <div class="code-block">
          <button class="copy-btn bg-green-500 text-white px-3 py-1 rounded text-sm" onclick="copyCode(this)">
            <i class="fas fa-copy"></i>
          </button>
          <pre class="rounded-lg"><code class="language-python"># physics.py - Function docstring dengan Parameters dan Returns
def calculate_collision(ball_1: Ball, ball_2: Ball, 
                       restitution: float,
                       contact_tracker: Dict[str, Any]) -> Tuple[float, float]:
    """
    Deteksi dan tangani tumbukan antara dua bola.
    
    Parameters:
    -----------
    ball_1 : Ball
        Bola pertama
    ball_2 : Ball
        Bola kedua
    restitution : float
        Koefisien restitusi (0.0 - 1.0)
    contact_tracker : dict
        Dictionary untuk tracking kontak tumbukan
        
    Returns:
    --------
    Tuple[float, float]
        (gaya_tumbukan, impuls_selesai)
    """

# ball.py - Class docstring dengan ATRIBUT
class Ball:
    """
    Representasi objek bola dalam simulasi fisika.
    
    ATRIBUT:
    --------
    canvas : tk.Canvas
        Canvas Tkinter untuk menggambar
    radius_pixels : float
        Jari-jari bola dalam piksel
    mass : float
        Massa bola (kg)
    position : np.array
        Posisi [x, y] dalam meter
    velocity : np.array
        Kecepatan [vx, vy] dalam m/s
    trail_points : deque
        Queue titik-titik jejak bola
    """</code></pre>
        </div>
      </div>

      <div class="highlight-box mt-6">
        <h4 class="font-bold text-lg mb-3">‚ú® Docstring Best Practices</h4>
        <ul class="text-sm space-y-2">
          <li>‚Ä¢ <strong>Triple quotes</strong> <code>"""docstring"""</code> even for one-line</li>
          <li>‚Ä¢ <strong>First line:</strong> Short summary (imperative mood: "Calculate..." not "Calculates...")</li>
          <li>‚Ä¢ <strong>Parameter:</strong> Jelaskan setiap parameter dengan type dan artinya</li>
          <li>‚Ä¢ <strong>Return:</strong> Jelaskan nilai return jika ada</li>
        </ul>
      </div>
    </div>

    <!-- Methods vs Functions -->
    <div class="mb-12">
      <h3 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
        <span class="text-4xl mr-3">üîß</span> Methods (Functions dalam Class)
      </h3>

      <div class="grid md:grid-cols-2 gap-6">
        <div class="bg-purple-50 dark:bg-purple-900/20 p-6 rounded-xl">
          <h4 class="text-xl font-bold text-purple-600 dark:text-purple-300 mb-4">Instance Methods</h4>
          <div class="code-block">
            <button class="copy-btn bg-purple-500 text-white px-3 py-1 rounded text-sm" onclick="copyCode(this)">
              <i class="fas fa-copy"></i>
            </button>
            <pre class="rounded-lg text-sm"><code class="language-python"># ball.py - Instance method
def draw_trail(self) -> None:
    """Menggambar jejak pergerakan bola."""
    for trail_id in self.trail_ids:
        self.canvas.delete(trail_id)
    # Akses instance attributes via self</code></pre>
          </div>
        </div>

        <div class="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl">
          <h4 class="text-xl font-bold text-blue-600 dark:text-blue-300 mb-4">Private Methods</h4>
          <div class="code-block">
            <button class="copy-btn bg-blue-500 text-white px-3 py-1 rounded text-sm" onclick="copyCode(this)">
              <i class="fas fa-copy"></i>
            </button>
            <pre class="rounded-lg text-sm"><code class="language-python"># app.py - Private method (convention)
def _setup_user_interface(self) -> None:
    """Setup seluruh komponen UI."""
    # _ prefix = internal use only</code></pre>
          </div>
        </div>
      </div>

      <div class="callout warning mt-6">
        <h4 class="font-bold mb-2">‚ö†Ô∏è self Parameter</h4>
        <p class="text-sm">Instance methods ALWAYS have <code>self</code> as first parameter.
          Ini is reference ke object instance yang memanggil method.</p>
      </div>
    </div>

    <!-- Callbacks -->
    <div class="mb-12">
      <h3 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
        <span class="text-4xl mr-3">üîó</span> Callback Functions
      </h3>

      <div class="bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-6 rounded-xl">
        <div class="code-block mb-4">
          <button class="copy-btn bg-orange-500 text-white px-3 py-1 rounded text-sm" onclick="copyCode(this)">
            <i class="fas fa-copy"></i>
          </button>
          <pre class="rounded-lg"><code class="language-python"># ui_components.py - Button callback
ttk.Button(
    frame_buttons, 
    text="‚ñ∂Ô∏è START", 
    command=start_callback  # ‚Üê Callback function
).pack(...)

# ui_components.py - Scale callback
position_y_slider_1 = ttk.Scale(
    container, 
    from_=-200, 
    to=200, 
    command=on_slider_moved  # ‚Üê Called when slider moves
)

# ui_components.py - Event binding callback
combo_mode.bind("<<ComboboxSelected>>", on_change_callback)</code></pre>
        </div>

        <div class="callout success">
          <h4 class="font-bold mb-2">üéØ Callback Pattern</h4>
          <p class="text-sm">Callback = function yang dipanggil "nanti" oleh framework/library saat event terjadi.
            Tidak memanggil function secara manual, tapi pass reference-nya.</p>
        </div>
      </div>
    </div>

    <!-- Nested Functions -->
    <div class="mb-12">
      <h3 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
        <span class="text-4xl mr-3">üì¶</span> Helper Functions (Nested)
      </h3>

      <div class="bg-white dark:bg-gray-700 p-6 rounded-xl shadow-lg">
        <div class="code-block">
          <button class="copy-btn bg-indigo-500 text-white px-3 py-1 rounded text-sm" onclick="copyCode(this)">
            <i class="fas fa-copy"></i>
          </button>
          <pre class="rounded-lg"><code class="language-python"># ui_components.py - Nested helper function
def create_ball_input_row(parent, owner, title, mass_attr, ...):
    """Membuat baris input untuk parameter satu bola."""
    
    # Helper function DIDALAM function  
    def create_entry(label: str, default: str, attr_name: str):
        ttk.Label(frame_inputs, text=label).pack(side=tk.LEFT)
        entry = ttk.Entry(frame_inputs, width=5)
        entry.insert(0, default)
        entry.pack(side=tk.LEFT, padx=(0, 5))
        setattr(owner, attr_name, entry)
    
    # Use the helper
    create_entry("m (kg):", mass_default, mass_attr)
    create_entry("vx (m/s):", vx_default, vx_attr)</code></pre>
        </div>

        <div class="callout tip mt-4">
          <p class="text-sm"><strong>Pattern:</strong> Nested function bagus untuk logic yang hanya dipakai di satu
            tempat.
            Keeps scope local, reduces namespace pollution.</p>
        </div>
      </div>
    </div>
  </div>
</section>