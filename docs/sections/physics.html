<!-- PHYSICS & PROGRAM FLOW SECTION -->
<section id="physics"
  class="py-20 px-6 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20">
  <div class="container mx-auto max-w-6xl">
    <div class="text-center mb-16">
      <span class="badge badge-purple mb-4">Bonus Section</span>
      <h2 class="text-4xl md:text-5xl font-bold mb-4 gradient-text">
        <i class="fas fa-atom mr-3"></i>Fisika & Alur Program
      </h2>
      <p class="text-xl text-gray-600 dark:text-gray-400">
        Belajar Python DAN Fisika sekaligus - Rumus fisika dijelaskan step-by-step dengan implementasi Python
      </p>
    </div>

    <!-- Program Flow Overview -->
    <div class="mb-16">
      <h3 class="text-3xl font-bold mb-8 text-center">üîÑ Alur Program Simulasi</h3>

      <!-- Visual Flow Diagram (FIRST) -->
      <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl mb-8">
        <h4 class="text-xl font-bold mb-6 text-center">üîÑ Diagram Alur Visual</h4>
        <div class="grid md:grid-cols-5 gap-4 text-center">
          <div class="bg-blue-100 dark:bg-blue-900/30 p-6 rounded-xl">
            <div class="text-4xl mb-3">1Ô∏è‚É£</div>
            <h4 class="font-bold mb-2">Initialization</h4>
            <p class="text-sm">Setup GUI, create Ball objects, set parameters</p>
            <code class="text-xs">app.py ‚Üí __init__()</code>
          </div>
          <div class="text-3xl flex items-center justify-center">‚Üí</div>
          <div class="bg-green-100 dark:bg-green-900/30 p-6 rounded-xl">
            <div class="text-4xl mb-3">2Ô∏è‚É£</div>
            <h4 class="font-bold mb-2">Event Loop</h4>
            <p class="text-sm">Update positions every 20ms</p>
            <code class="text-xs">app.py ‚Üí _run_loop()</code>
          </div>
          <div class="text-3xl flex items-center justify-center">‚Üí</div>
          <div class="bg-purple-100 dark:bg-purple-900/30 p-6 rounded-xl">
            <div class="text-4xl mb-3">3Ô∏è‚É£</div>
            <h4 class="font-bold mb-2">Physics</h4>
            <p class="text-sm">Collision detection & resolution</p>
            <code class="text-xs">physics.py ‚Üí calculate_collision()</code>
          </div>
        </div>

        <div class="mt-8 grid md:grid-cols-2 gap-4">
          <div class="bg-orange-100 dark:bg-orange-900/30 p-6 rounded-xl text-center">
            <div class="text-4xl mb-3">4Ô∏è‚É£</div>
            <h4 class="font-bold mb-2">Visualization</h4>
            <p class="text-sm">Update canvas, draw balls & trails, plot graphs</p>
            <code class="text-xs">ball.py ‚Üí update_visual_position(), draw_trail()</code>
          </div>
          <div class="bg-pink-100 dark:bg-pink-900/30 p-6 rounded-xl text-center">
            <div class="text-4xl mb-3">5Ô∏è‚É£</div>
            <h4 class="font-bold mb-2">Data Logging</h4>
            <p class="text-sm">Record momentum, energy, forces</p>
            <code class="text-xs">app.py ‚Üí _log_simulation_data()</code>
          </div>
        </div>

        <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
          <p class="text-center text-sm">
            <strong>Loop berulang setiap 20ms (50 FPS)</strong> hingga user stop atau tutup window
          </p>
        </div>
      </div>

      <!-- Implementasi Kode Section (BELOW DIAGRAM) -->
      <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl">
        <h4 class="text-2xl font-bold mb-6 text-purple-600 dark:text-purple-400">
          üìã Implementasi Kode
        </h4>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
          Implementasi simulasi dilakukan menggunakan bahasa pemrograman Python dengan struktur modular.
          Modul utama <code>physics.py</code> menangani seluruh logika interaksi fisik, sementara inisialisasi
          parameter dilakukan pada antarmuka utama. Berikut adalah rincian implementasi kode berdasarkan tahapan
          simulasi:
        </p>

        <!-- Step A: Inisialisasi -->
        <div class="border-l-4 border-blue-500 pl-6 mb-6">
          <h5 class="font-bold text-lg mb-2 text-blue-600 dark:text-blue-400">
            A. Inisialisasi Objek dan Parameter
          </h5>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
            Pada tahap awal, sistem membaca input parameter fisik dari pengguna (massa dan kecepatan awal vektor).
            Objek bola diinstansiasi menggunakan kelas <code>Ball</code> yang menyimpan properti fisik dan visual.
            Kode melakukan konversi satuan dari piksel ke meter untuk memastikan akurasi perhitungan fisika.
          </p>
          <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg mb-3">
            <p class="text-sm font-mono">
              üìÅ <strong>ball.py</strong> ‚Üí Baris <code>42-101</code> (Ball.__init__)<br>
              üìÅ <strong>app.py</strong> ‚Üí Baris <code>377-420</code> (reset_simulation)
            </p>
          </div>
          <div class="code-block">
            <button class="copy-btn bg-blue-500 text-white px-2 py-1 rounded text-sm" onclick="copyCode(this)">
              <i class="fas fa-copy"></i>
            </button>
            <pre class="rounded-lg text-sm"><code class="language-python"># ball.py - Ball.__init__() (Baris 42-101)
class Ball:
    def __init__(self, 
                 canvas: tk.Canvas, 
                 x_pixels: float, 
                 y_pixels: float, 
                 radius_pixels: float, 
                 color: str, 
                 mass: float, 
                 velocity_x: float, 
                 velocity_y: float, 
                 pixels_to_meters: float):
        self.canvas = canvas
        self.radius_pixels = radius_pixels
        self.radius_meters = radius_pixels * pixels_to_meters
        self.mass = float(mass)
        self.pixels_to_meters = pixels_to_meters
        self.color = color

        # Posisi dan kecepatan dalam satuan meter dan m/s
        self.position = np.array([x_pixels * pixels_to_meters, 
                                  y_pixels * pixels_to_meters], dtype=float)
        self.velocity = np.array([velocity_x, velocity_y], dtype=float)

        # Trail (jejak bola)
        self.trail_points = deque(maxlen=TRAIL_MAX_LENGTH)
        self.trail_ids = []

        # Gambar bola di canvas
        self.canvas_id = canvas.create_oval(
            x_pixels - radius_pixels, 
            y_pixels - radius_pixels, 
            x_pixels + radius_pixels, 
            y_pixels + radius_pixels,
            fill=color, 
            outline="black", 
            width=BALL_BORDER_WIDTH
        )</code></pre>
          </div>
        </div>

        <!-- Step B: Deteksi Tumbukan -->
        <div class="border-l-4 border-green-500 pl-6 mb-6">
          <h5 class="font-bold text-lg mb-2 text-green-600 dark:text-green-400">
            B. Deteksi Tumbukan (Collision Detection)
          </h5>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
            Sistem mendeteksi tumbukan dengan menghitung jarak <em>Euclidean</em> antar pusat massa kedua objek.
            Jika jarak ini lebih kecil atau sama dengan jumlah jari-jari kedua bola, maka kondisi tumbukan terpenuhi.
          </p>
          <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg mb-3">
            <p class="text-sm font-mono">
              üìÅ <strong>physics.py</strong> ‚Üí Baris <code>24-34</code>
            </p>
          </div>
          <div class="code-block">
            <button class="copy-btn bg-green-500 text-white px-2 py-1 rounded text-sm" onclick="copyCode(this)">
              <i class="fas fa-copy"></i>
            </button>
            <pre class="rounded-lg text-sm"><code class="language-python"># physics.py - calculate_collision() (Baris 24-34)
def calculate_collision(ball_1: Ball, 
                        ball_2: Ball, 
                        restitution: float,
                        contact_tracker: Dict[str, Any]) -> Tuple[float, float]:
    """
    Deteksi dan tangani tumbukan antara dua bola.
    Menggunakan Hukum Kekekalan Momentum dan Koefisien Restitusi.
    """
    
    # 1. Menghitung jarak antara dua pusat massa (Euclidean Distance)
    # Rumus: dist = ||pos_1 - pos_2|| = sqrt((x1-x2)^2 + (y1-y2)^2)
    pos_diff = ball_1.position - ball_2.position
    dist = np.linalg.norm(pos_diff)
    
    # Jarak minimal agar bersentuhan: r1 + r2
    min_dist = ball_1.radius_meters + ball_2.radius_meters
    f_sample = 0.0
    finished_impulse = 0.0 

    if dist <= min_dist:  # Tumbukan terdeteksi!
        # Lanjut ke perhitungan fisika...</code></pre>
          </div>
        </div>

        <!-- Step C: Perhitungan Vektor -->
        <div class="border-l-4 border-yellow-500 pl-6 mb-6">
          <h5 class="font-bold text-lg mb-2 text-yellow-600 dark:text-yellow-400">
            C. Perhitungan Vektor Normal dan Kecepatan Relatif
          </h5>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
            Saat tumbukan terdeteksi, program menghitung vektor normal satuan (<em>n</em>) yang menjadi acuan garis
            dampak (<em>line of impact</em>). Selanjutnya, dihitung kecepatan relatif (<em>v<sub>rel</sub></em>)
            antara dua benda untuk menentukan arah gerak relatif.
          </p>
          <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg mb-3">
            <p class="text-sm font-mono">
              üìÅ <strong>physics.py</strong> ‚Üí Baris <code>35-48</code>
            </p>
          </div>
          <div class="code-block">
            <button class="copy-btn bg-yellow-500 text-white px-2 py-1 rounded text-sm" onclick="copyCode(this)">
              <i class="fas fa-copy"></i>
            </button>
            <pre class="rounded-lg text-sm"><code class="language-python"># physics.py - calculate_collision() (Baris 35-48)
if dist <= min_dist:
    # 2. Menentukan Normal Vektor (Unit Vector)
    # Vektor satuan yang menunjuk dari benda 2 ke benda 1
    # Rumus: n = (pos_1 - pos_2) / dist
    n = pos_diff / (dist + 1e-9)
    
    # 3. Menghitung Kecepatan Relatif
    # Kecepatan benda 1 dilihat dari benda 2
    # Rumus: v_rel = v_1 - v_2
    v_rel = ball_1.velocity - ball_2.velocity
    
    # 4. Proyeksi Kecepatan Relatif ke Normal Vektor (Dot Product)
    # Kita hanya peduli pada kecepatan sepanjang Garis Dampak (Line of Impact)
    # Rumus: v_norm = v_rel ‚Ä¢ n
    v_norm = np.dot(v_rel, n)</code></pre>
          </div>
        </div>

        <!-- Step D: Kalkulasi Impuls -->
        <div class="border-l-4 border-purple-500 pl-6 mb-6">
          <h5 class="font-bold text-lg mb-2 text-purple-600 dark:text-purple-400">
            D. Kalkulasi Impuls dan Momentum
          </h5>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
            Program menghitung besar impuls skalar (<em>j</em>) yang bekerja pada benda berdasarkan Hukum Kekekalan
            Momentum dan Koefisien Restitusi (Lenting). Impuls ini kemudian dikonversi menjadi vektor dan diterapkan
            untuk mengubah kecepatan kedua bola.
          </p>
          <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg mb-3">
            <p class="text-sm font-mono">
              üìÅ <strong>physics.py</strong> ‚Üí Baris <code>62-78</code>
            </p>
          </div>
          <div class="code-block">
            <button class="copy-btn bg-purple-500 text-white px-2 py-1 rounded text-sm" onclick="copyCode(this)">
              <i class="fas fa-copy"></i>
            </button>
            <pre class="rounded-lg text-sm"><code class="language-python"># physics.py - calculate_collision() (Baris 62-78)
# 6. Kalkulasi Impuls (Hanya jika benda saling mendekat: v_norm < 0)
if v_norm < 0:
    # Menghitung Impuls Skalar (j)
    # Rumus turunan dari Kekekalan Momentum & Restitusi:
    # j = [-(1 + e) * v_norm] / [(1/m1) + (1/m2)]
    j = -(1 + restitution) * v_norm
    j /= (1.0 / ball_1.mass + 1.0 / ball_2.mass)
    
    # Mengubah Impuls Skalar menjadi Vektor sepanjang normal
    # Rumus Impuls Vektor (J): J = j * n
    impulse_vec = j * n

    # 7. Update Kecepatan Akhir (v')
    # Menerapkan perubahan momentum: delta_p = J
    # v_new = v_old ¬± (J / m)
    ball_1.velocity += impulse_vec / ball_1.mass
    ball_2.velocity -= impulse_vec / ball_2.mass</code></pre>
          </div>
        </div>

        <!-- Step E: Pembaruan Posisi -->
        <div class="border-l-4 border-red-500 pl-6 mb-6">
          <h5 class="font-bold text-lg mb-2 text-red-600 dark:text-red-400">
            E. Pembaruan Posisi (Time Integration)
          </h5>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
            Posisi setiap objek diperbarui pada setiap langkah waktu (<em>time step</em>) menggunakan metode
            integrasi Euler. Posisi baru adalah hasil penjumlahan posisi lama dengan perpindahan akibat
            kecepatan selama selang waktu.
          </p>
          <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg mb-3">
            <p class="text-sm font-mono">
              üìÅ <strong>ball.py</strong> ‚Üí Baris <code>140-161</code> (Ball.move)<br>
              üìÅ <strong>physics.py</strong> ‚Üí Baris <code>50-60</code> (Resolusi Overlap)
            </p>
          </div>
          <div class="code-block">
            <button class="copy-btn bg-red-500 text-white px-2 py-1 rounded text-sm" onclick="copyCode(this)">
              <i class="fas fa-copy"></i>
            </button>
            <pre class="rounded-lg text-sm"><code class="language-python"># ball.py - Ball.move() (Baris 140-161)
def move(self, time_step: float) -> None:
    """
    Gerakkan bola berdasarkan kecepatan dan waktu.
    
    Parameters:
    -----------
    time_step : float
        Delta waktu (detik)
    """
    # Update posisi: s = s‚ÇÄ + v¬∑Œît
    self.position += self.velocity * time_step
    
    # Konversi ke piksel untuk visual
    pixels_x = self.position[0] / self.pixels_to_meters
    pixels_y = self.position[1] / self.pixels_to_meters
    
    # Simpan posisi untuk jejak
    self.trail_points.append((pixels_x, pixels_y))
    
    # Update visual
    self.draw_trail()
    self.update_visual_position()</code></pre>
          </div>
        </div>

        <!-- Summary Table -->
        <div
          class="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl">
          <h5 class="font-bold mb-4 text-center text-lg">üìä Ringkasan Referensi Baris Kode</h5>
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="bg-purple-100 dark:bg-purple-900/30">
                  <th class="p-3 text-left rounded-tl-lg">#</th>
                  <th class="p-3 text-left">Tahap</th>
                  <th class="p-3 text-left">File</th>
                  <th class="p-3 text-left rounded-tr-lg">Baris</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-b dark:border-gray-700">
                  <td class="p-3 font-bold">A</td>
                  <td class="p-3">Inisialisasi Kondisi Awal</td>
                  <td class="p-3"><code>ball.py</code> / <code>app.py</code></td>
                  <td class="p-3"><code>42-101</code> / <code>377-420</code></td>
                </tr>
                <tr class="border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50">
                  <td class="p-3 font-bold">B</td>
                  <td class="p-3">Deteksi Tumbukan</td>
                  <td class="p-3"><code>physics.py</code></td>
                  <td class="p-3"><code>24-34</code></td>
                </tr>
                <tr class="border-b dark:border-gray-700">
                  <td class="p-3 font-bold">C</td>
                  <td class="p-3">Perhitungan Fisika (x,y)</td>
                  <td class="p-3"><code>physics.py</code></td>
                  <td class="p-3"><code>35-48</code></td>
                </tr>
                <tr class="border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50">
                  <td class="p-3 font-bold">D</td>
                  <td class="p-3">Kekekalan Momentum & Restitusi</td>
                  <td class="p-3"><code>physics.py</code></td>
                  <td class="p-3"><code>62-78</code></td>
                </tr>
                <tr>
                  <td class="p-3 font-bold rounded-bl-lg">E</td>
                  <td class="p-3">Pembaruan Posisi</td>
                  <td class="p-3"><code>ball.py</code> / <code>physics.py</code></td>
                  <td class="p-3 rounded-br-lg"><code>140-161</code> / <code>50-60</code></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Physics Concepts -->
    <div class="mb-16">
      <h3 class="text-3xl font-bold mb-8 text-center">‚öõÔ∏è Konsep Fisika yang Digunakan</h3>

      <!-- Momentum Conservation -->
      <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl mb-8">
        <h4 class="text-2xl font-bold mb-4 text-purple-600 dark:text-purple-400">
          1. Hukum Kekekalan Momentum
        </h4>

        <div class="grid md:grid-cols-2 gap-8">
          <div>
            <h5 class="font-bold mb-3 text-lg">üìê Rumus Matematika</h5>
            <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-4">
              <p class="font-mono text-lg text-center mb-2">
                <strong>Momentum:</strong> p = m √ó v
              </p>
              <p class="font-mono text-lg text-center mb-2">
                <strong>Konservasi:</strong> p‚ÇÅ + p‚ÇÇ = p‚ÇÅ' + p‚ÇÇ'
              </p>
              <p class="font-mono text-lg text-center">
                <strong>Total:</strong> P_total = m‚ÇÅv‚ÇÅ + m‚ÇÇv‚ÇÇ
              </p>
            </div>
            <div class="text-sm space-y-2">
              <p><strong>Dimana:</strong></p>
              <ul class="list-disc list-inside space-y-1">
                <li>p = momentum (kg¬∑m/s)</li>
                <li>m = massa (kg)</li>
                <li>v = kecepatan (m/s)</li>
                <li>' = setelah tumbukan</li>
              </ul>
            </div>
          </div>

          <div>
            <h5 class="font-bold mb-3 text-lg">üíª Implementasi Python</h5>
            <div class="code-block">
              <button class="copy-btn bg-purple-500 text-white px-2 py-1 rounded text-sm" onclick="copyCode(this)">
                <i class="fas fa-copy"></i>
              </button>
              <pre class="rounded-lg"><code class="language-python"># physics.py - calculate_physics_data()
def calculate_physics_data(ball_1: Ball, ball_2: Ball) -> Tuple[float, float]:
    """Hitung data fisika: momentum total dan energi kinetik."""
    # Total momentum vektor
    p_vec = ball_1.mass * ball_1.velocity + ball_2.mass * ball_2.velocity
    p_tot = np.linalg.norm(p_vec)
    
    # Energi kinetik total
    ke = (0.5 * ball_1.mass * np.dot(ball_1.velocity, ball_1.velocity) + 
          0.5 * ball_2.mass * np.dot(ball_2.velocity, ball_2.velocity))
    
    return p_tot, ke</code></pre>
            </div>
            <div class="callout success mt-3">
              <p class="text-sm"><strong>Insight:</strong> Dalam sistem tertutup (no external forces), momentum total
                SELALU konstan!</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Collision Physics -->
      <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl mb-8">
        <h4 class="text-2xl font-bold mb-4 text-blue-600 dark:text-blue-400">
          2. Fisika Tumbukan (Collision)
        </h4>

        <div class="grid md:grid-cols-2 gap-8">
          <div>
            <h5 class="font-bold mb-3 text-lg">üìê Rumus Impulse-Momentum</h5>
            <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-4">
              <p class="font-mono text-sm text-center mb-3">
                <strong>Impulse:</strong>
              </p>
              <p class="font-mono text-lg text-center mb-3">
                J = -(1 + e) √ó v_rel ¬∑ nÃÇ / (1/m‚ÇÅ + 1/m‚ÇÇ)
              </p>
              <p class="font-mono text-sm text-center mb-3">
                <strong>Velocity Change:</strong>
              </p>
              <p class="font-mono text-base text-center mb-2">
                Œîv‚ÇÅ = J √ó nÃÇ / m‚ÇÅ
              </p>
              <p class="font-mono text-base text-center">
                Œîv‚ÇÇ = -J √ó nÃÇ / m‚ÇÇ
              </p>
            </div>
            <div class="text-sm space-y-2">
              <p><strong>Variabel:</strong></p>
              <ul class="list-disc list-inside space-y-1">
                <li>J = impulse magnitude (N¬∑s)</li>
                <li>e = coefficient of restitution (0-1)</li>
                <li>v_rel = relative velocity</li>
                <li>nÃÇ = collision normal (unit vector)</li>
                <li>m = mass of each ball</li>
              </ul>
            </div>
          </div>

          <div>
            <h5 class="font-bold mb-3 text-lg">üíª Implementasi Python</h5>
            <div class="code-block">
              <button class="copy-btn bg-blue-500 text-white px-2 py-1 rounded text-sm" onclick="copyCode(this)">
                <i class="fas fa-copy"></i>
              </button>
              <pre class="rounded-lg"><code class="language-python"># physics.py - calculate_collision()
# 1. Collision normal (unit vector)
pos_diff = ball_1.position - ball_2.position
dist = np.linalg.norm(pos_diff)
n = pos_diff / (dist + 1e-9)  # Normalize

# 2. Relative velocity along normal
v_rel = ball_1.velocity - ball_2.velocity
v_norm = np.dot(v_rel, n)

# 3. Check if approaching
if v_norm < 0:  # Negative = approaching
    # 4. Calculate impulse magnitude
    j = -(1 + restitution) * v_norm
    j /= (1.0 / ball_1.mass + 1.0 / ball_2.mass)
    
    # 5. Apply impulse (vector)
    impulse_vec = j * n
    ball_1.velocity += impulse_vec / ball_1.mass
    ball_2.velocity -= impulse_vec / ball_2.mass</code></pre>
            </div>
          </div>
        </div>

        <div
          class="mt-6 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl">
          <h5 class="font-bold mb-3">üéØ Step-by-Step Collision Process:</h5>
          <ol class="text-sm space-y-2">
            <li><strong>1. Detect:</strong> Check if distance ‚â§ r‚ÇÅ + r‚ÇÇ</li>
            <li><strong>2. Normal Vector:</strong> Direction dari ball1 ke ball2</li>
            <li><strong>3. Relative Velocity:</strong> v‚ÇÅ - v‚ÇÇ projected onto normal</li>
            <li><strong>4. Calculate Impulse:</strong> Using mass ratio and restitution</li>
            <li><strong>5. Update Velocities:</strong> Apply impulse to both balls</li>
            <li><strong>6. Separation:</strong> Push balls apart if overlapping</li>
          </ol>
        </div>
      </div>

      <!-- Coefficient of Restitution -->
      <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl mb-8">
        <h4 class="text-2xl font-bold mb-4 text-green-600 dark:text-green-400">
          3. Koefisien Restitusi (e)
        </h4>

        <div class="grid md:grid-cols-3 gap-6 mb-6">
          <div class="bg-red-50 dark:bg-red-900/20 p-6 rounded-xl text-center">
            <div class="text-4xl mb-3">e = 0</div>
            <h5 class="font-bold mb-2">Inelastic</h5>
            <p class="text-sm">Bola menempel setelah tumbukan</p>
            <p class="text-xs mt-2 text-gray-600 dark:text-gray-400">Energi kinetic hilang maksimal</p>
          </div>
          <div class="bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-xl text-center">
            <div class="text-4xl mb-3">0 < e < 1</div>
                <h5 class="font-bold mb-2">Semi-Elastic</h5>
                <p class="text-sm">Ada energy yang hilang</p>
                <p class="text-xs mt-2 text-gray-600 dark:text-gray-400">Realistic collision (bola basket e‚âà0.8)</p>
            </div>
            <div class="bg-green-50 dark:bg-green-900/20 p-6 rounded-xl text-center">
              <div class="text-4xl mb-3">e = 1</div>
              <h5 class="font-bold mb-2">Elastic</h5>
              <p class="text-sm">Energy kinetic konstan</p>
              <p class="text-xs mt-2 text-gray-600 dark:text-gray-400">Perfect bounce (ideal case)</p>
            </div>
          </div>

          <div class="bg-gray-100 dark:bg-gray-700 p-6 rounded-lg">
            <h5 class="font-bold mb-3 text-center">Rumus Koefisien Restitusi</h5>
            <p class="font-mono text-xl text-center mb-4">
              e = (v‚ÇÇ' - v‚ÇÅ') / (v‚ÇÅ - v‚ÇÇ)
            </p>
            <p class="text-sm text-center">
              Rasio kecepatan relatif setelah dan sebelum tumbukan
            </p>
          </div>
        </div>

        <!-- Kinetic Energy -->
        <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl mb-8">
          <h4 class="text-2xl font-bold mb-4 text-orange-600 dark:text-orange-400">
            4. Energi Kinetik
          </h4>

          <div class="grid md:grid-cols-2 gap-8">
            <div>
              <h5 class="font-bold mb-3 text-lg">üìê Rumus</h5>
              <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-4">
                <p class="font-mono text-xl text-center mb-3">
                  KE = ¬Ω m v¬≤
                </p>
                <p class="font-mono text-lg text-center mb-3">
                  KE_total = KE‚ÇÅ + KE‚ÇÇ
                </p>
                <p class="font-mono text-base text-center">
                  = ¬Ωm‚ÇÅv‚ÇÅ¬≤ + ¬Ωm‚ÇÇv‚ÇÇ¬≤
                </p>
              </div>
              <div class="callout warning">
                <p class="text-sm"><strong>‚ö†Ô∏è Perhatian:</strong> Energi kinetik HANYA konstan jika e = 1 (elastic).
                  Jika e < 1, ada energy yang hilang menjadi panas/suara.</p>
              </div>
            </div>

            <div>
              <h5 class="font-bold mb-3 text-lg">üíª Implementasi Python</h5>
              <div class="code-block">
                <button class="copy-btn bg-orange-500 text-white px-2 py-1 rounded text-sm" onclick="copyCode(this)">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="rounded-lg"><code class="language-python"># physics.py - calculate_physics_data()
def calculate_physics_data(ball_1: Ball, ball_2: Ball) -> Tuple[float, float]:
    # Total momentum vektor
    p_vec = ball_1.mass * ball_1.velocity + ball_2.mass * ball_2.velocity
    p_tot = np.linalg.norm(p_vec)
    
    # Energi kinetik total: KE = 0.5 * m * v¬≤
    # Using dot product: np.dot(v, v) = v¬∑v = |v|¬≤
    ke = (0.5 * ball_1.mass * np.dot(ball_1.velocity, ball_1.velocity) + 
          0.5 * ball_2.mass * np.dot(ball_2.velocity, ball_2.velocity))
    
    return p_tot, ke</code></pre>
              </div>
              <div class="callout tip mt-3">
                <p class="text-sm"><strong>Optimization:</strong> Menggunakan <code>np.dot(v, v)</code> lebih cepat
                  dari <code>np.linalg.norm(v)**2</code>!</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Motion Equation -->
        <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl">
          <h4 class="text-2xl font-bold mb-4 text-indigo-600 dark:text-indigo-400">
            5. Kinematika - Persamaan Gerak
          </h4>

          <div class="grid md:grid-cols-2 gap-8">
            <div>
              <h5 class="font-bold mb-3 text-lg">üìê Rumus</h5>
              <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-4">
                <p class="font-mono text-xl text-center mb-4">
                  s = s‚ÇÄ + v¬∑Œît
                </p>
                <p class="text-sm text-center mb-3">Untuk 2D (vector form):</p>
                <p class="font-mono text-base text-center mb-2">
                  x(t) = x‚ÇÄ + v_x¬∑Œît
                </p>
                <p class="font-mono text-base text-center">
                  y(t) = y‚ÇÄ + v_y¬∑Œît
                </p>
              </div>
              <div class="text-sm space-y-2">
                <p><strong>Variabel:</strong></p>
                <ul class="list-disc list-inside space-y-1">
                  <li>s = posisi (m)</li>
                  <li>s‚ÇÄ = posisi awal (m)</li>
                  <li>v = kecepatan (m/s)</li>
                  <li>Œît = time step (s)</li>
                </ul>
              </div>
            </div>

            <div>
              <h5 class="font-bold mb-3 text-lg">üíª Implementasi Python</h5>
              <div class="code-block">
                <button class="copy-btn bg-indigo-500 text-white px-2 py-1 rounded text-sm" onclick="copyCode(this)">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="rounded-lg"><code class="language-python"># ball.py - Ball.move()
def move(self, time_step: float) -> None:
    """
    Gerakkan bola berdasarkan kecepatan dan waktu.
    
    Parameters:
    -----------
    time_step : float
        Delta waktu (detik)
    """
    # Update posisi: s = s‚ÇÄ + v¬∑Œît
    self.position += self.velocity * time_step
    
    # Konversi ke piksel untuk visual
    pixels_x = self.position[0] / self.pixels_to_meters
    pixels_y = self.position[1] / self.pixels_to_meters
    
    # Simpan posisi untuk jejak
    self.trail_points.append((pixels_x, pixels_y))
    
    # Update visual
    self.draw_trail()
    self.update_visual_position()</code></pre>
              </div>
              <div class="highlight-box mt-3">
                <h6 class="font-bold mb-2">üöÄ NumPy Vectorization Power!</h6>
                <p class="text-sm">Satu line <code>position += velocity * dt</code> handles X DAN Y sekaligus.
                  Ini contoh perfect kenapa NumPy amazing untuk scientific computing!</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Summary Card -->
      <div class="bg-gradient-to-r from-purple-600 to-pink-600 text-white p-8 rounded-2xl shadow-2xl">
        <h3 class="text-3xl font-bold mb-6 text-center">üéì Summary: Python Meets Physics</h3>

        <div class="grid md:grid-cols-2 gap-8">
          <div>
            <h4 class="text-xl font-bold mb-4 text-yellow-300">‚öõÔ∏è Physics Learned</h4>
            <ul class="space-y-2">
              <li>‚úÖ <strong>Momentum Conservation:</strong> p_total = constant</li>
              <li>‚úÖ <strong>Collision Physics:</strong> Impulse calculation</li>
              <li>‚úÖ <strong>Coefficient of Restitution:</strong> e determines bounce</li>
              <li>‚úÖ <strong>Kinetic Energy:</strong> KE = ¬Ωmv¬≤</li>
              <li>‚úÖ <strong>Kinematics:</strong> Position update dengan velocity</li>
            </ul>
          </div>
          <div>
            <h4 class="text-xl font-bold mb-4 text-yellow-300">üíª Python Skills Applied</h4>
            <ul class="space-y-2">
              <li>‚úÖ <strong>Vector Math:</strong> NumPy array operations</li>
              <li>‚úÖ <strong>OOP:</strong> Ball class encapsulates physics</li>
              <li>‚úÖ <strong>Event Loop:</strong> Real-time simulation</li>
              <li>‚úÖ <strong>Visualization:</strong> Tkinter + Matplotlib</li>
              <li>‚úÖ <strong>Data Logging:</strong> Track conservation laws</li>
            </ul>
          </div>
        </div>

        <div class="mt-6 p-4 bg-white/20 rounded-xl text-center">
          <p class="text-lg font-bold">
            üéØ Result: Kamu belajar Python sambil understand physics behind the simulation!
          </p>
        </div>
      </div>
    </div>
</section>